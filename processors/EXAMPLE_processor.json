{
    "_comment": "THIS IS AN EXAMPLE FILE - Copy and modify for your own processors",
    "name": "example_processor",
    "description": "Example stream processor - filters active records and writes to MongoDB",
    "pipeline": [
        {
            "$source": {
                "connectionName": "my_kafka_connection",
                "topic": "my_topic"
            }
        },
        {
            "$match": {
                "status": "active"
            }
        },
        {
            "$addFields": {
                "processor_name": "example_processor"
            }
        },
        {
            "$project": {
                "timestamp": 1,
                "processor_name": 1,
                "data": 1,
                "status": 1
            }
        },
        {
            "$merge": {
                "into": {
                    "connectionName": "Cluster01",
                    "db": "stream_output",
                    "coll": "processed_data"
                },
                "whenNotMatched": "insert"
            }
        }
    ]
}
